# Granola to Craft.do Integration

This script automates the process of collecting meeting summaries and full transcripts from your Granola account and appending them to your Craft.do Daily Notes at the end of the day.

## How it works

1. Fetches all meetings created on the current day from Granola.
2. For each meeting, it retrieves:
   - **AI Summary**: High-quality notes generated by Granola.
   - **Full Transcript**: A readable log of the conversation.
3. Formats everything into Markdown.
4. Appends it to your Craft.do **Daily Note** for today.
   - Summaries are placed directly in the note.
   - Transcripts are added as a **Sub-page (Card)** to keep the main note clean.

## Setup

### 1. Granola Configuration
Since Granola doesn't have a public API, you need to capture your session data from the browser:
- Open Granola in your browser and log in.
- Open Developer Tools (F12) -> Network tab.
- Find any request to `api.granola.ai` (e.g., `get-documents`).
- Copy the following values from the request headers:
  - `Authorization` (the full `Bearer ...` string).
  - `X-Granola-Device-Id`.
  - `X-Granola-Workspace-Id`.

### 2. Craft.do API
- Open Craft.do settings -> **Imagine**.
- Create a new API connection.
- Copy your **Token** and **Space ID** (found in the URL or settings).

### 3. Environment Variables
Create a `.env` file in the project root:
```env
GRANOLA_COOKIE="Bearer your_token_here"
X_GRANOLA_DEVICE_ID="your_device_id"
X_GRANOLA_WORKSPACE_ID="your_workspace_id"
X_CLIENT_VERSION="6.462.1"

CRAFT_TOKEN="your_craft_token"
CRAFT_SPACE_ID="your_space_id"
```

## Installation

We recommend using a virtual environment:
```bash
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
pip install -r requirements.txt
```

## Usage

Run the script manually:
```bash
python granola_to_craft.py
```

Or set up a cron job to run it daily at 8:00 PM:
```bash
0 20 * * * cd /path/to/project && ./venv/bin/python granola_to_craft.py
```
